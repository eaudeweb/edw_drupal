{% apply spaceless %}
{#
Parameters:
  - "items" (array) (default: []): List of items
  - "sr_previous" (string) (default: 'Previous slides') screen reader label for previous button
  - "sr_next" (string) (default: 'Next slides') screen reader label for next button
  - "centered" (bool) (default: true) Define if banner should be centered
  - "full_width": (bool) (default: false) Full width banner (inside the grid)
  - "extra_classes" (string) (default: '')
  - "extra_attributes" (array) (default: []): format: [
      {
        "name" (string) (default: ''),
        "value" (optional) (string)
      ...
    ]
#}

{# Internal properties #}

{% set _css_class = 'carousel slide'%}
{% set _extra_attributes = '' %}
{% set _full_width = full_width|default(false) %}
{% set _centered = centered|default(true) %}
{% set _sr_previous = sr_previous|default('Previous slides') %}
{% set _sr_next = sr_next|default('Next slides') %}

{# Internal logic - Process properties #}
{% if _full_width %}
  {% set _css_class = _css_class ~ ' carousel--full-width container-fluid' %}
{% endif %}

{% if extra_classes is defined and extra_classes is not empty %}
  {% set _css_class = _css_class ~ ' ' ~ extra_classes %}
{% endif %}

{% if extra_attributes is defined and extra_attributes is not empty and extra_attributes is iterable %}
  {% for attr in extra_attributes %}
    {% if attr.value is defined %}
      {% set _extra_attributes = _extra_attributes ~ ' ' ~ attr.name|e('html_attr') ~ '="' ~ attr.value|e('html_attr') ~ '"' %}
    {% else %}
      {% set _extra_attributes = _extra_attributes ~ ' ' ~ attr.name|e('html_attr') %}
    {% endif %}
  {% endfor %}
{% endif %}

{# Print the result #}
<div id="{{ identifier }}" class="{{ _css_class }}" data-bs-ride="carousel" {{ _extra_attributes|raw }}>
  <div class="carousel-inner">
    {% for item in items %}
      <div class="carousel-item{{ loop.first ? ' active' }}">
        {{- item -}}
      </div>
    {% endfor %}
  </div>
  <div class="carouse-controls">
    <button class="carousel-control carousel-control-prev" type="button" data-bs-target="#{{ identifier }}" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">{{ _sr_previous }}</span>
    </button>

    <div class="carousel-indicators">
      {% for item in items %}
        {% set ariaLabel = 'Slide ' ~ loop.index %}
        <button type="button" data-bs-target="#{{ identifier }}" data-bs-slide-to="{{ loop.index0 }}" aria-label="{{ ariaLabel }}" {{ loop.first ? 'class="active" aria-current="true"' : 'aria-current="false"' }}></button>
      {% endfor %}
    </div>

    <button class="carousel-control carousel-control-next" type="button" data-bs-target="#{{ identifier }}" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">{{ _sr_next }}</span>
    </button>
  </div>
</div>

{% endapply %}
